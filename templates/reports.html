{% extends "base.html" %}
{% block content %}

<section class="card">
  <h2>ðŸ“ˆ Berichte</h2>
  <p class="muted">MonatsÃ¼bersicht je Kategorie, plus Summe Einnahmen/Ausgaben/Saldo.</p>
</section>

{% if totals %}
  {% for ym, sums in totals.items() %}
    <section class="card">
      <h2>ðŸ—“ {{ ym }}</h2>
      <div class="summary">
        <div><strong>Einnahmen:</strong> <span class="pos">{{ sums.income|euro }} â‚¬</span></div>
        <div><strong>Ausgaben:</strong> <span class="neg">{{ sums.expense|euro }} â‚¬</span></div>
        <div><strong>Saldo:</strong> {{ sums.balance|euro }} â‚¬</div>
      </div>

      {% set cats = monthly.get(ym) %}
      {% if cats %}
        <div class="table-wrapper" style="margin-top:10px;">
          <table class="table">
            <thead>
              <tr>
                <th>Kategorie</th>
                <th class="right">Summe</th>
              </tr>
            </thead>
            <tbody>
              {% for cat, val in cats.items() %}
                <tr>
                  <td><span class="badge">{{ cat }}</span></td>
                  <td class="right {{ 'neg' if val < 0 else 'pos' }}">{{ val|euro }} â‚¬</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <p class="muted">Keine EintrÃ¤ge in diesem Monat.</p>
      {% endif %}
    </section>
  {% endfor %}
{% else %}
  <section class="card">
    <p class="muted">Noch keine Daten fÃ¼r Berichte vorhanden.</p>
  </section>
{% endif %}

{% endblock %}
